<html>
  <head>
    <title>Map View</title>
    <link href="styles/common.css" rel="stylesheet" type="text/css">
    <link href="styles/browse.css" rel="stylesheet" type="text/css">
    <link href="styles/thumbnail.css" rel="stylesheet" type="text/css">
    <style>
      #the-map {
        position:     fixed;
        top:        0px;
        left:        0px;
        width:        100%;
        height:        100%;
      }
      .item-lens-container {
        padding:        1em;
        width:          30em;
        border:         1px solid #ccc;
        height:         18em;
        overflow:       hidden;
      }
    </style>
    <script src="http://api.simile-widgets.org/ajax/2.2.1/simile-ajax-api.js"></script>
    <script src="scripts/externals/json2.js"></script>
    <script>
      var baseUrl = "";
    </script>
    
    <script src="scripts/common.js"></script>
    <script src="scripts/util/queue.js"></script>
    <script src="scripts/util/render.js"></script>
    <script src="scripts/util/url.js"></script>
    <script src="scripts/views/map-view/map-view-markers.js"></script>
    <script src="scripts/views/map-view/map-view-plotting.js"></script>
    <script src="gmap-keys.js"></script>
    
    <script>
      // use new marker service
      markerUrlPrefix = "http://service.simile-widgets.org/painter/painter?";
      
      var params = parseURLParameters(document.location.href);
      
      function onLoad() {
        createMap();
        window.parent[params.callbackID]();
      }
      
      function clearPoints() {
        map.clearOverlays();
      }
      
      function mapPoints(dataPoints, hasSize, hasImage, popupRenderer, onFocus) {
        map.clearOverlays();
        internalAddPoints(dataPoints, hasSize, hasImage, popupRenderer, onFocus);
      }
      
      function showLightboxForThumbnail(evt) {
        return window.parent["showLightboxForThumbnail"](evt, this.src);
      }
    </script>
  </head>
  <body onload="onLoad()"><div id="the-map"></div>
</body></html>
